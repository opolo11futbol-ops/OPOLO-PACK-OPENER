/* Fuente y reset */
:root{
  --bg:#0b1020;
  --panel:#0f1530;
  --muted:#9aa4c7;
  --text:#e9eeff;
  --primary:#4cc9f0;
  --gold:#f5c542;
  --silver:#c0c7d1;
  --bronze:#c38154;
  /* Rarity palette tuned */
  --elite:#9d4edd;   /* Flashback morado */
  --icon:#ffd166;    /* Icono amarillo */
  --rare:#7b2cbf;    /* Héroe morado */
  --common:#f5c542;  /* Oro amarillo */
  --totw:#111827;    /* TOTW: negro/gris oscuro */
  --totw-accent:#ffb703; /* TOTW acento dorado */
  --danger:#ff6b6b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:radial-gradient(1200px 600px at 80% -10%, #1b2350 0%, #0b1020 60%, #070a16 100%);
  color:var(--text); font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial; line-height:1.4;
}

/* Topbar */
.topbar{display:flex; align-items:center; justify-content:space-between; padding:14px 18px; backdrop-filter:blur(6px);
  background:linear-gradient(180deg, rgba(20,30,70,.8), rgba(10,15,35,.5)); border-bottom:1px solid #1f2750; position:sticky; top:0; z-index:10}
.brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.5px}
.brand .logo{height:28px; width:auto; display:block}
.status{display:flex; gap:10px; align-items:center}
.coins{background:#0c1330; padding:8px 12px; border-radius:10px; border:1px solid #20295a}

/* Buttons */
.btn{background:linear-gradient(180deg, #3a75ff, #2049d8); color:#fff; border:none; border-radius:12px; padding:12px 18px; font-weight:700; cursor:pointer; box-shadow:0 6px 18px rgba(40,90,255,.3); transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn:disabled{opacity:.5; cursor:not-allowed; transform:none}
.btn-outline{background:transparent; border:1px solid #2a3570; color:var(--text)}
.btn.small{padding:8px 12px; font-size:.9rem}

.container{max-width:1100px; margin:20px auto 60px; padding:0 16px}

/* Packs */
.packs h2{margin:6px 4px 14px; font-weight:800}
.pack-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px}
.pack{background:linear-gradient(180deg, #111737, #0d1330); border:1px solid #1e2a70; border-radius:16px; padding:14px; text-align:left; cursor:pointer; transition:.2s; position:relative; overflow:hidden}
.pack:hover{transform:translateY(-2px); box-shadow:0 12px 24px rgba(0,0,0,.25)}
.pack .pack-title{font-weight:900; margin-bottom:6px}
.pack .pack-info{font-size:.9rem; color:var(--muted)}
.pack .bronze{color:var(--bronze)}
.pack .silver{color:var(--silver)}
.pack .gold{color:var(--gold)}
.pack .promo{color:var(--primary)}
.pack .totw{color:var(--totw-accent)}

.actions{display:flex; gap:10px; margin:16px 4px}

/* Reveal cards */
.reveal{margin-top:18px; background:linear-gradient(180deg, #0e1538, #0a112b); border:1px solid #1b255a; border-radius:16px; padding:14px; display:none}
.reveal.show{display:block}
.reveal-header{display:flex; align-items:center; justify-content:space-between; margin:6px 2px 12px}
.cards{display:grid; grid-template-columns:repeat(auto-fit, 180px); justify-content:center; gap:16px}

/* Card */
.card{perspective:1000px; width:100%}
.card-inner{position:relative; width:100%; aspect-ratio:2.1/3; transform-style:preserve-3d; transition:transform .6s}
.card.flipped .card-inner{transform:rotateY(180deg)}
.card-face{position:absolute; inset:0; backface-visibility:hidden; border-radius:14px; border:1px solid rgba(255,255,255,.15); overflow:hidden}
.card-front{background:linear-gradient(160deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); display:flex; flex-direction:column; justify-content:flex-end; padding:12px; gap:6px; position:relative}
.card-front .art{position:absolute; inset:0; overflow:hidden}
.card-front .art img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; z-index:0}
.card.noart .card-front .art{background:repeating-linear-gradient(45deg,#eef2ff,#eef2ff 12px,#e2e8f8 12px,#e2e8f8 24px)}
.card.noart .card-front::after{content:"Sin imagen"; position:absolute; top:10px; left:10px; background:rgba(14,26,61,.8); color:#fff; padding:2px 8px; border-radius:8px; font-size:.8rem; z-index:3}
.shimmer{position:absolute; inset:-40%; background:conic-gradient(from 180deg at 50% 50%, transparent, rgba(255,255,255,.15), transparent); filter:blur(18px); animation:spin 6s linear infinite;}
@keyframes spin{to{transform:rotate(1turn)}}
.card-back{background:linear-gradient(200deg, #1d295d, #0c1333); display:grid; place-items:center; font-size:2rem; transform:rotateY(180deg)}
.rating{font-size:2rem; font-weight:900}
.name{font-weight:800}
.nation,.position{font-size:.9rem; color:var(--muted)}
.card.common{border-color:rgba(245,197,66,.6)} /* Oro: amarillo */
.card.common .rating{color:var(--common)}
.card.rare{border-color:rgba(123,44,191,.6); box-shadow:0 0 22px rgba(255,159,26,.18) inset} /* Héroe: morado con brillo naranja */
.card.rare .rating{color:#ff9f1a}
.card.elite{border-color:rgba(157,78,221,.6); box-shadow:0 0 24px rgba(157,78,221,.18) inset} /* Flashback: morado */
.card.elite .rating{color:var(--elite)}
.card.icon{border-color:rgba(255,255,255,.75); box-shadow:0 0 20px rgba(255,209,102,.20) inset} /* Icono: blanco con amarillo */
.card.icon .rating{color:var(--icon)}
/* TOTW: negro con acentos dorados */
.card.totw{border-color:rgba(255,183,3,.65); box-shadow:0 0 24px rgba(255,183,3,.18) inset}
.card.totw .rating{color:var(--totw-accent)}
/* World Tour (Silver) */
.card.world_tour_silver{border-color:rgba(192,199,209,.7); box-shadow:0 0 20px rgba(192,199,209,.25) inset}
.card.world_tour_silver .rating{color:var(--silver)}
/* World Tour */
.card.world_tour{border-color:rgba(76,201,240,.6); box-shadow:0 0 22px rgba(76,201,240,.22) inset}
.card.world_tour .rating{color:#4cc9f0}
/* RTTK */
.card.rttk{border-color:rgba(46,204,113,.6); box-shadow:0 0 22px rgba(46,204,113,.22) inset}
.card.rttk .rating{color:#2ecc71}
/* Miracle Moments */
.card.miracle{border-color:rgba(255,159,26,.6); box-shadow:0 0 22px rgba(255,159,26,.22) inset}
.card.miracle .rating{color:#ff9f1a}

/* Reveal: estilo tipo ficha vertical como en el ejemplo */
.reveal .shimmer{display:none}
.reveal .card-front{justify-content:flex-start; gap:10px; padding:12px}
.reveal .card-front .art{position:relative; inset:auto; width:100%; height:120px; border-radius:10px; overflow:hidden; background:#e9edf7}
.reveal .card-front .art img{position:absolute; inset:0; object-fit:contain; width:100%; height:100%; background:#e9edf7}
.reveal .card-front .name{margin-top:6px; text-align:center; font-size:1rem; font-weight:900; color:#0e1a3d}
.reveal .card-front .nation{margin-top:2px; text-align:center; font-weight:900}
.card.common .card-front .nation{color:#d4a100}
.card.rare .card-front .nation{color:#7b2cbf}
.card.icon .card-front .nation{color:#c28f00}
.card.elite .card-front .nation{color:#9d4edd}
.card.totw .card-front .nation{color:#b8860b}
.reveal .card-front .position{display:block; text-align:center; color:var(--muted); font-size:.9rem}

/* Club */
.club{margin-top:18px; background:linear-gradient(180deg, #0e1538, #0a112b); border:1px solid #1b255a; border-radius:16px; padding:14px; display:none}
.club.show{display:block}
.club-header{display:flex; align-items:center; justify-content:space-between}
.club-actions{display:flex; gap:8px; align-items:center}
.club-actions input, .club-actions select{background:#0c1330; color:var(--text); border:1px solid #1f2758; border-radius:10px; padding:10px 12px}
.club-grid{margin-top:12px; display:grid; grid-template-columns:repeat(auto-fit, minmax(150px,1fr)); gap:10px}
.empty{color:var(--muted); text-align:center; padding:18px}
/* Footer */
.footer{margin:30px 0; text-align:center; color:#7f89b0}

/* Auth */
.auth-overlay{position:fixed; inset:0; background:rgba(5,8,20,.85); backdrop-filter:blur(6px); display:none; align-items:center; justify-content:center; z-index:50}
.auth-card{background:linear-gradient(180deg, #10183d, #0c1330); border:1px solid #1e2a70; border-radius:16px; padding:20px; width:min(92vw, 420px);} 
.auth-card h2{margin:0 0 8px}
.auth-card .muted{color:var(--muted); margin:0 0 12px}
.auth-card form{display:flex; flex-direction:column; gap:10px}
.auth-card input{background:#0c1330; color:var(--text); border:1px solid #1f2758; border-radius:10px; padding:12px}
.auth-actions{display:flex; justify-content:flex-end}

/* Tournament */
.tournament{margin-top:18px; background:linear-gradient(180deg, #0e1538, #0a112b); border:1px solid #1b255a; border-radius:16px; padding:14px; display:none}
.tournament.show{display:block}
.tour-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.tour-body{display:flex; flex-direction:column; gap:10px}
.tour-status{display:flex; gap:16px; color:var(--muted)}
.tour-field{border:1px dashed #2a3570; border-radius:12px; padding:14px; text-align:center}
.tour-result{margin-bottom:8px; font-weight:600}
.tour-result.neutral{color:var(--muted)}
.tour-result.goal-you{color:#2fd27a}
.tour-result.goal-opp{color:#ff6b6b}
.tour-result.no-goal{color:#ffc04d}
.tour-message{margin-bottom:10px}
.choices{display:flex; justify-content:center; gap:8px}
.choice{background:#0c1330; color:var(--text); border:1px solid #1f2758; border-radius:12px; padding:10px 12px; cursor:pointer}
.choice:hover{background:#121a44}

/* Penalty Grid */
.pen-grid{position:relative; width:min(680px, 92%); aspect-ratio:16/9; margin:10px auto; 
  background:
    linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.18)),
    url('assets/goal.svg') center/contain no-repeat,
    radial-gradient(120% 100% at 50% 100%, #1e2434 0%, #121620 60%, #0b0f18 100%);
  border-radius:12px; overflow:hidden; display:grid; grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(3,1fr); gap:8px; padding:12px}
.pen-inner{position:absolute; inset:18% 16% 18% 16%; display:grid; grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(3,1fr); gap:10px;}
.pen-cell{display:flex; align-items:center; justify-content:center; cursor:pointer;}
.pen-spot{width:72px; height:72px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #cfd6e6, #8f98ad); box-shadow: inset 0 6px 14px rgba(0,0,0,.25), 0 6px 12px rgba(0,0,0,.2)}
.pen-cell.scored .pen-spot{background:radial-gradient(circle at 30% 30%, #8fe1a0, #2fd27a)}
.pen-cell.saved .pen-spot{background:radial-gradient(circle at 30% 30%, #ff9c9c, #ff6b6b)}

/* Light theme override: blue background, white sections */
body{background:linear-gradient(180deg,#6f42c1,#5b2aa6); color:#0e1a3d}
header, .packs, .reveal, .tournament, .auth-card, .club, .club-card, .club-header, .tour-field{
  background:#ffffff !important;
  border-color:#d9e2f1 !important;
  box-shadow:0 6px 18px rgba(12, 24, 64, 0.08)
}
.pack{background:#ffffff; border:1px solid #d9e2f1}
.pack .name, .pack .price, .pack .desc{color:#0e1a3d}
.btn{border-color:#d9e2f1}
.btn.btn-outline{background:#ffffff; color:#0e1a3d}
/* Cartas visibles en tema claro */
.card-face{border:1px solid #e6ecf7}
.card-front{background:linear-gradient(160deg,#f8faff,#f3f6fd)}
/* Asegura visibilidad del texto sobre la imagen y shimmer */
.card-front .rating,
.card-front .name,
.card-front .nation,
.card-front .position{position:relative; z-index:2; color:#0e1a3d}
.card-front .shimmer{z-index:1}
.card-back{background:linear-gradient(200deg,#eef2ff,#e6ecf7)}
.choices .choice{background:#f6f8ff; border-color:#d9e2f1; color:#0e1a3d}
.choices .choice:hover{background:#eef3ff}
.auth-overlay{background:rgba(10,16,32,.50)}

/* Make coins text readable on dark pill over light header */
.topbar .coins{color:#ffffff}

/* Exchange */
.exchange-overlay{position:fixed; inset:0; background:rgba(5,8,20,.85); backdrop-filter:blur(6px); display:none; align-items:center; justify-content:center; z-index:50}
.exchange-card{background:#ffffff; border:1px solid #d9e2f1; border-radius:16px; padding:18px; width:min(96vw, 760px)}
.exchange-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
.exchange-body{display:grid; grid-template-columns:1fr 220px; gap:12px}
.exchange-list{max-height:50vh; overflow:auto; border:1px solid #e6ecf7; border-radius:10px; padding:8px; display:grid; grid-template-columns:1fr 1fr; gap:8px}
.exchange-item{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px; border:1px solid #e6ecf7; border-radius:10px; cursor:pointer}
.exchange-item.active{outline:2px solid #6f42c1; background:#f6f0ff}
.exchange-item.disabled{opacity:.55; cursor:not-allowed; background:linear-gradient(0deg, #f7fafc, #ffffff)}
.exchange-controls{display:flex; flex-direction:column; gap:10px; border:1px dashed #d9e2f1; border-radius:10px; padding:12px}
.exchange-controls #exchangeValue{font-weight:700}
.tag{padding:2px 8px; border-radius:999px; font-size:.75rem; text-transform:uppercase}
.tag.common{background:#fff5d6; color:#8a6a00}
.tag.rare{background:#e9f6ff; color:#004e7a}
.tag.icon{background:#fff0f0; color:#8a0018}
.tag.elite{background:#f3e9ff; color:#4b1f9a}
.tag.dcp{background:#e7fff2; color:#0a6b3c; font-weight:800}
/* TOTW tags */
.tag.totw{background:#fff3da; color:#8a5a00; font-weight:800}

/* Duplicate count badge on club cards */
.dup-badge{position:absolute; top:6px; left:6px; background:#0f172a; color:#ffffff; border:1px solid #223057; border-radius:999px; padding:2px 8px; font-weight:700; font-size:.8rem; z-index:5; box-shadow:0 2px 6px rgba(0,0,0,.25)}

/* Lineup overlay */
.lineup-overlay{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(20,16,35,.65); backdrop-filter:blur(6px); z-index:60}
.lineup-card{background:#ffffff; color:#0e1a3d; border:1px solid #d9e2f1; border-radius:16px; width:min(96vw, 1000px); max-height:88vh; display:flex; flex-direction:column; box-shadow:0 10px 28px rgba(12,24,64,.18)}
.lineup-header{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid #e6ecf7}
.lineup-body{display:grid; grid-template-columns:1fr 1fr; gap:14px; padding:14px; overflow:auto}
.lineup-field{background:linear-gradient(180deg,#6f42c1,#5b2aa6); border:1px solid #d9e2f1; border-radius:12px; padding:12px; display:flex; flex-direction:column; gap:10px}
.lineup-field .row{display:flex; gap:10px; justify-content:center}
.lineup-field .slot{background:#ffffff; border:2px dashed #c9d5ee; border-radius:12px; padding:10px; min-width:120px; text-align:center; font-weight:700; cursor:pointer}
.lineup-field .slot.filled{border-style:solid; border-color:#8bb5ff; background:#f6f8ff}
.lineup-field .slot.selected{border-style:solid; border-color:#6a9dff; box-shadow:0 0 0 4px rgba(104,144,255,.15)}
.lineup-field .slot.drag-over, .lineup-field .slot.drag-over.filled{border-style:solid; border-color:#33c481; background:#eefcf5}
.lineup-list{background:#fff; border:1px solid #d9e2f1; border-radius:12px; padding:12px; display:flex; flex-direction:column; gap:10px}
.lineup-list .list{display:flex; flex-direction:column; gap:8px; max-height:56vh; overflow:auto}
.lineup-list .list-item{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px 10px; border:1px solid #e9eef9; border-radius:10px}
.lineup-list .tag{display:inline-block; text-transform:capitalize; font-weight:800; padding:2px 8px; border-radius:10px; font-size:.8rem}
.lineup-list .tag.common{background:#fff7d6; color:#7a5a00}
.lineup-list .tag.rare{background:#efe4ff; color:#5b2aa6}
.lineup-list .tag.icon{background:#fff3c9; color:#7a5a00}
.lineup-list .tag.elite{background:#efe0ff; color:#4a148c}
.lineup-list .tag.totw{background:#fff0da; color:#8a5a00}
/* New rarity tags */
.lineup-list .tag.world_tour_silver{background:#f0f2f7; color:#455062}
.lineup-list .tag.world_tour{background:#e7f8ff; color:#0b6b86}
.lineup-list .tag.rttk{background:#e9fff2; color:#0a6b3c}
.lineup-list .tag.miracle{background:#fff4e6; color:#8a4f00}
.lineup-footer{display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-top:1px solid #e6ecf7}

/* DCP overlay */
.dcp-overlay{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(20,16,35,.65); backdrop-filter:blur(6px); z-index:60}
.dcp-card{background:#ffffff; color:#0e1a3d; border:1px solid #d9e2f1; border-radius:16px; width:min(96vw, 900px); max-height:88vh; display:flex; flex-direction:column; box-shadow:0 10px 28px rgba(12,24,64,.18)}
.dcp-header{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid #e6ecf7}
.dcp-body{padding:14px; overflow:auto}
.dcp-list .list{display:flex; flex-direction:column; gap:8px; max-height:56vh; overflow:auto}
.dcp-item{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px 10px; border:1px solid #e9eef9; border-radius:10px; cursor:pointer}
.dcp-item.active{outline:2px solid #6f42c1; background:#f6f0ff}
.dcp-footer{display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-top:1px solid #e6ecf7}
